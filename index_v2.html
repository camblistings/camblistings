<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Cambridge Cinema Tonight - All Film Showtimes & Listings | Light, Picturehouse, Everyman, Cineworld</title>
    <meta name="description" content="Complete Cambridge cinema listings for tonight and this week. Real-time showtimes for The Light Cambridge, Picturehouse, Everyman, Cineworld Ely. Book tickets instantly.">
    <meta name="keywords" content="Cambridge cinema, cinema tonight, Cambridge film showtimes, Light Cambridge, Picturehouse Cambridge, Everyman Cambridge, Cineworld Ely, cinema listings, film times, movie tickets, Cambridge entertainment">
    <meta name="author" content="Cambridge Cinema Hub">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Cambridge Cinema Tonight - All Film Showtimes & Listings">
    <meta property="og:description" content="Complete Cambridge cinema listings for tonight and this week. Real-time showtimes for all Cambridge cinemas. Book tickets instantly.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://camblistings.github.io/listings-data">
    <meta property="og:image" content="https://camblistings.github.io/listings-data/cinema-hub-image.jpg">
    <meta property="og:site_name" content="Cambridge Cinema Hub">
    <meta property="og:locale" content="en_GB">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Cambridge Cinema Tonight - All Film Showtimes & Listings">
    <meta name="twitter:description" content="Complete Cambridge cinema listings for tonight and this week. Real-time showtimes for all Cambridge cinemas.">
    <meta name="twitter:image" content="https://camblistings.github.io/listings-data/cinema-hub-image.jpg">
    
    <!-- Location Meta Tags -->
    <meta name="geo.region" content="GB-ENG">
    <meta name="geo.placename" content="Cambridge, England">
    <meta name="geo.position" content="52.2053;0.1218">
    <meta name="ICBM" content="52.2053,0.1218">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Cambridge Cinema Hub",
        "description": "Complete Cambridge cinema listings and showtimes for tonight and this week",
        "url": "https://camblistings.github.io/listings-data",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://camblistings.github.io/listings-data?q={search_term_string}",
            "query-input": "required name=search_term_string"
        },
        "mainEntity": {
            "@type": "LocalBusiness",
            "name": "Cambridge Cinema Hub",
            "description": "Comprehensive cinema listings for Cambridge and Ely",
            "areaServed": {
                "@type": "City",
                "name": "Cambridge"
            },
            "knowsAbout": [
                "The Light Cambridge",
                "Arts Picturehouse Cambridge", 
                "Everyman Cambridge",
                "Cineworld Ely",
                "Cinema showtimes",
                "Film listings",
                "Movie tickets"
            ]
        }
    }
    </script>
    
    <!-- Additional SEO -->
    <link rel="canonical" href="https://camblistings.github.io/listings-data">
    <link rel="alternate" href="https://cambridge-films.vercel.app" hreflang="en">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üé¨</text></svg>">
    <style>
        :root {
            --primary: #667eea;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1a202c;
            --light-text: #718096;
            --header-height: 0px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text); line-height: 1.3; }

        .container { max-width: 800px; margin: 0 auto; padding: 10px; }

        /* Sticky Header for Filters */
        .header-sticky {
            position: sticky;
            top: 0;
            background: var(--bg);
            z-index: 1000;
            padding-bottom: 5px;
            border-bottom: 1px solid #e2e8f0;
        }

        header { padding: 5px 0; display: flex; justify-content: space-between; align-items: center; }
        h1 { font-size: 1.2rem; font-weight: 800; }

        /* --- Search Bar --- */
        #movieSearch {
            width: 100%;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            margin: 5px 0;
            font-size: 0.9rem;
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            gap: 8px;
            margin: 5px 0;
        }
        .view-btn {
            flex: 1;
            padding: 6px 12px;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--light-text);
            transition: all 0.2s;
        }
        .view-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Wrapping Buttons */
        .filter-label { font-size: 0.65rem; font-weight: 700; color: var(--light-text); text-transform: uppercase; margin-top: 5px; display: block; }
        .scroll-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            padding: 4px 0;
        }

        .btn {
            padding: 4px 10px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--light-text);
            font-size: 0.75rem;
        }
        .btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* --- Time Slot Sections --- */
        .time-slot-section {
            margin-bottom: 25px;
            scroll-margin-top: calc(var(--header-height, 200px) + 40px);
        }

        .time-slot-label {
            position: sticky !important;
            top: calc(var(--header-height, 200px) + 20px) !important;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 6px 12px;
            font-size: 0.8rem;
            font-weight: 800;
            text-transform: uppercase;
            z-index: 950 !important;
            margin: 15px -10px 8px -10px;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.15);
        }

        /* --- Film Cards --- */
        .film-card {
            background: var(--card);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
            border-left: 4px solid var(--primary);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .film-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
        }

        .film-title { 
            font-size: 0.9rem; 
            font-weight: 700; 
            flex: 1; 
            padding-right: 8px;
            line-height: 1.2;
        }
        .film-meta { 
            font-size: 0.7rem; 
            color: var(--light-text); 
            white-space: nowrap;
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .cinema-list {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 6px;
        }

        .cinema-tag {
            background: #edf2f7;
            color: var(--primary);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 600;
            border: 1px solid #e2e8f0;
        }

        .showtime-info {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 4px;
            font-size: 0.7rem;
            color: var(--light-text);
        }

        .time-badge {
            background: var(--primary);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.65rem;
        }

        /* --- Cinema Sections (for cinema view) --- */
        .cinema-section { 
            margin-bottom: 30px; 
            scroll-margin-top: calc(var(--header-height, 200px) + 40px);
        }

        .cinema-label {
            position: sticky !important;
            top: calc(var(--header-height, 200px) + 20px) !important;
            background: #edf2f7 !important;
            padding: 4px 10px;
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            color: var(--primary);
            z-index: 950 !important;
            margin: 10px -10px 5px -10px;
            border-bottom: 1px solid #cbd5e0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .film-row {
            background: var(--card);
            border-bottom: 1px solid #f1f5f9;
            padding: 8px 5px;
        }

        .film-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 4px;
        }

        .showtimes-container { display: flex; flex-wrap: wrap; gap: 4px; }
        .time-pill {
            padding: 3px 8px;
            background: #f1f5f9;
            color: var(--primary);
            text-decoration: none;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.75rem;
            border: 1px solid #e2e8f0;
        }
        .time-pill.past { opacity: 0.3; text-decoration: line-through; pointer-events: none; }

        /* Back to Top Button */
        #backToTop {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s, transform 0.3s;
            opacity: 0;
            pointer-events: none;
            z-index: 2000;
        }

        #backToTop.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        #backToTop:hover {
            transform: scale(1.1);
            background: #5a67d8;
        }

        .no-shows { padding: 40px; text-align: center; color: var(--light-text); font-style: italic; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-sticky">
        <header>
            <h1>üé¨ Cambridge Cinema Tonight</h1>
            <div style="font-size: 0.8rem; color: var(--light-text); margin: 5px 0;">
                Complete cinema listings for Cambridge & Ely ‚Ä¢ Real-time showtimes ‚Ä¢ Instant booking
            </div>
            <div id="lastUpdate" style="font-size: 0.65rem; color: var(--light-text);"></div>
            <div id="savedIndicator" style="font-size: 0.6rem; color: #48bb78; opacity: 0; transition: opacity 0.3s;">‚úì Saved</div>
        </header>
        
        <div class="view-toggle">
            <button class="view-btn active" onclick="setView('time')">‚è∞ By Time</button>
            <button class="view-btn" onclick="setView('cinema')">üè¢ By Cinema</button>
        </div>
        
        <input type="text" id="movieSearch" placeholder="Search film titles..." oninput="renderList()">

        <span class="filter-label">Cinemas</span>
        <div id="cinemaBar" class="scroll-bar"></div>
        
        <span class="filter-label">Days</span>
        <div id="dayBar" class="scroll-bar"></div>

        <div id="jumpContainer" style="margin-top: 5px; display: flex; align-items: center; gap: 8px;">
            <span class="filter-label" style="margin: 0;">Jump to:</span>
            <select id="jumpMenu" onchange="jumpToSection(this.value)" style="flex: 1; font-size: 0.75rem; padding: 2px; border-radius: 4px; border: 1px solid #e2e8f0; background: white;">
                <option value="">Select a section...</option>
            </select>
        </div>
    </div>

    <div id="mainContent"></div>
</div>

<button id="backToTop" onclick="scrollToTop()" title="Go to top">‚Üë</button>

<script>
    let cinemaData = null;
    let selectedDayIndex = 0;
    let activeCinemas = new Set();
    let currentView = 'time'; // 'time' or 'cinema'
    const dateOptions = [];

    function setupDates() {
        const now = new Date();
        for (let i = 0; i < 7; i++) {
            const d = new Date();
            d.setDate(now.getDate() + i);
            let label = i === 0 ? "Today" : i === 1 ? "Tomorrow" : d.toLocaleDateString('en-GB', { weekday: 'short' });
            dateOptions.push({ label, key: d.toLocaleDateString('en-GB', { weekday: 'long' }).toLowerCase() });
        }
        dateOptions.push({ label: "Future", key: "future" });
    }

    // Function to measure header height and set CSS variable
    function updateHeaderHeight() {
        const header = document.querySelector('.header-sticky');
        if (header) {
            const height = header.offsetHeight;
            document.documentElement.style.setProperty('--header-height', `${height}px`);
            console.log(`Header height set to: ${height}px`);
        }
    }

    // Parse time string to minutes since midnight
    function timeToMinutes(timeStr) {
        // Handle both colon and dot formats
        const cleanTime = timeStr.replace('.', ':');
        const [hours, minutes] = cleanTime.split(':').map(Number);
        
        // Debug logging
        console.log(`Time: ${timeStr} -> Clean: ${cleanTime} -> Hours: ${hours}, Minutes: ${minutes}`);
        
        return hours * 60 + minutes;
    }

    // Group films by time (simplified - just sort selected day by time)
    function groupFilmsByTime(films) {
        const allFilms = [];

        films.forEach(film => {
            // Only include films for selected day
            if (film.day === selectedKey) {
                film.showtimes.forEach(time => {
                    allFilms.push({
                        title: film.title,
                        cinema: film.cinema,
                        rating: film.rating,
                        duration: film.duration,
                        booking_url: film.booking_url,
                        time: time
                    });
                });
            }
        });

        // Sort by time (simple string comparison)
        allFilms.sort((a, b) => {
            const aTime = a.time.replace('.', ':');
            const bTime = b.time.replace('.', ':');
            return aTime.localeCompare(bTime);
        });

        return { 'All Showtimes': allFilms };
    }

    function setView(view) {
        currentView = view;
        document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
        const viewBtn = document.querySelector(`.view-btn[onclick="setView('${view}')"]`);
        if (viewBtn) viewBtn.classList.add('active');
        saveUserPreferences();
        renderList();
    }

    function renderDayBar() {
        const bar = document.getElementById('dayBar');
        bar.innerHTML = dateOptions.map((opt, idx) => `
            <button class="btn ${idx === selectedDayIndex ? 'active' : ''}" onclick="selectDay(${idx})">
                ${opt.label}
            </button>
        `).join('');
    }

    function selectDay(i) { 
        selectedDayIndex = i; 
        saveUserPreferences();
        renderDayBar(); 
        renderList();
    }

    function renderCinemaBar() {
        const bar = document.getElementById('cinemaBar');
        if (!bar || !cinemaData) return;

        let html = `<button class="btn ${activeCinemas.size === cinemaData.cinemas.length ? 'active' : ''}" onclick="toggleAllCinemas()">ALL</button>`;
        
        html += cinemaData.cinemas.map(c => {
            let shortName = c.name
                .replace('The Light Cambridge - Regular Screens', 'The Light')
                .replace('The Light Cambridge - IMAX', 'IMAX')
                .replace('Arts Picturehouse Cambridge', 'Picturehouse')
                .replace('Everyman Cambridge', 'Everyman')
                .replace('Cineworld Ely', 'Ely');

            return `
                <button class="btn ${activeCinemas.has(c.name) ? 'active' : ''}" onclick="toggleCinema('${c.name}')">
                    ${shortName}
                </button>
            `;
        }).join('');
        bar.innerHTML = html;
    }

    function toggleCinema(name) {
        if (activeCinemas.has(name)) {
            if (activeCinemas.size > 1) activeCinemas.delete(name);
        } else {
            activeCinemas.add(name);
        }
        saveUserPreferences();
        renderCinemaBar();
        renderList();
    }

    function toggleAllCinemas() {
        if (activeCinemas.size === cinemaData.cinemas.length) {
            const first = cinemaData.cinemas[0].name;
            activeCinemas.clear(); activeCinemas.add(first);
        } else {
            cinemaData.cinemas.forEach(c => activeCinemas.add(c.name));
        }
        saveUserPreferences();
        renderCinemaBar();
        renderList();
    }

    function saveUserPreferences() {
        const preferences = {
            activeCinemas: Array.from(activeCinemas),
            selectedDayIndex: selectedDayIndex,
            currentView: currentView
        };
        localStorage.setItem('cinemaPreferences', JSON.stringify(preferences));
        
        // Show saved indicator briefly
        const indicator = document.getElementById('savedIndicator');
        if (indicator) {
            indicator.style.opacity = '1';
            setTimeout(() => {
                indicator.style.opacity = '0';
            }, 1000);
        }
    }

    function loadUserPreferences() {
        const saved = localStorage.getItem('cinemaPreferences');
        if (saved) {
            try {
                const preferences = JSON.parse(saved);
                return preferences;
            } catch (e) {
                console.error('Error loading preferences:', e);
            }
        }
        return null;
    }

    function isPast(showTime, dayKey) {
        const [hours, minutes] = showTime.split(':').map(Number);
        const showDate = new Date();
        showDate.setHours(hours, minutes, 0, 0);
        
        // Adjust date based on the selected day
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        if (dayKey === 'today') {
            // Use today's date
            return showDate < new Date();
        } else if (dayKey === 'tomorrow') {
            // Use tomorrow's date
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(hours, minutes, 0, 0);
            return tomorrow < new Date();
        } else {
            // For future days, assume not past
            return false;
        }
    }

    
    
    function renderList() {
    const container = document.getElementById('mainContent');
    const selectedKey = dateOptions[selectedDayIndex].key;
    const query = document.getElementById('movieSearch').value.toLowerCase();
    container.innerHTML = '';

    // Collect all films for the selected day
    let allFilms = [];
    cinemaData.cinemas.forEach(cinema => {
        if (!activeCinemas.has(cinema.name)) return;

        // DEBUG: Log what we're matching
        console.log('Selected day index:', selectedDayIndex);
        console.log('Selected key:', selectedKey);
        console.log('Cinema:', cinema.name);
        console.log('Sample film days:', cinema.films.slice(0, 5).map(f => ({ title: f.title, day: f.day })));

        const films = cinema.films.filter(f => {
            const filmDay = (f.day || 'today').toLowerCase();
            const dayMatch = selectedKey === 'future' ? 
                !dateOptions.slice(0, 7).some(opt => opt.key === filmDay) :
                (selectedDayIndex === 0 && filmDay === 'today') || 
                (selectedDayIndex === 1 && filmDay === 'tomorrow') || 
                (filmDay === selectedKey);
            
            // DEBUG: Log Wuthering Heights specifically
            if (f.title.includes('Wuthering')) {
                console.log('Wuthering Heights:', { filmDay, selectedKey, dayMatch });
            }
            
            return dayMatch && f.title.toLowerCase().includes(query);
        });

        films.forEach(film => {
            allFilms.push({
                ...film,
                cinema: cinema.name
            });
        });
    });

    if (allFilms.length === 0) {
        container.innerHTML = '<div class="no-shows">No screenings found for this filter.</div>';
        updateJumpMenu();
        return;
    }

    if (currentView === 'time') {
        renderTimeView(container, allFilms);
    } else {
        renderCinemaView(container, allFilms);
    }

    updateJumpMenu();
}
    
   

    function renderTimeView(container, allFilms) {
        const timeSlots = groupFilmsByTime(allFilms);
        
        Object.entries(timeSlots).forEach(([slotName, films]) => {
            if (films.length === 0) return;

            const div = document.createElement('div');
            div.className = 'time-slot-section';
            div.id = slotName.replace(/\s+/g, '-').toLowerCase();

            const filmsHtml = films.map(film => `
                <div class="film-card">
                    <div class="film-header">
                        <div class="film-title">${film.title}</div>
                        <div class="film-meta">${film.rating} ‚Ä¢ ${film.duration}</div>
                    </div>
                    <div class="cinema-list">
                        <span class="cinema-tag">${film.cinema}</span>
                    </div>
                    <div class="showtime-info">
                        <span class="time-badge">${film.time}</span>
                        <a href="${film.booking_url}" target="_blank" style="color: var(--primary); text-decoration: none;">Book ‚Üí</a>
                    </div>
                </div>
            `).join('');

            div.innerHTML = `<div class="time-slot-label">${slotName}</div>` + filmsHtml;
            container.appendChild(div);
        });
    }

    function renderCinemaView(container, allFilms) {
        // Group films by cinema
        const filmsByCinema = {};
        allFilms.forEach(film => {
            if (!filmsByCinema[film.cinema]) {
                filmsByCinema[film.cinema] = [];
            }
            filmsByCinema[film.cinema].push(film);
        });

        Object.entries(filmsByCinema).forEach(([cinemaName, films]) => {
            const div = document.createElement('div');
            div.className = 'cinema-section';
            div.id = cinemaName.replace(/\s+/g, '-').toLowerCase();

            const rowsHtml = films.map(f => `
                <div class="film-row">
                    <div class="film-header">
                        <div class="film-title">${f.title}</div>
                        <div class="film-meta">${f.rating} ‚Ä¢ ${f.duration}</div>
                    </div>
                    <div class="showtimes-container">
                        ${f.showtimes.map(t => `
                            <a href="${f.booking_url}" class="time-pill ${isPast(t, selectedKey) ? 'past' : ''}" target="_blank">${t}</a>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            div.innerHTML = `<div class="cinema-label">${cinemaName}</div>` + rowsHtml;
            container.appendChild(div);
        });
    }

    function updateJumpMenu() {
        const menu = document.getElementById('jumpMenu');
        const sections = currentView === 'time' ? 
            document.querySelectorAll('.time-slot-section') : 
            document.querySelectorAll('.cinema-section');
        
        let html = '<option value="">Select a section...</option>';
        sections.forEach(section => {
            const name = section.querySelector('.time-slot-label, .cinema-label').innerText;
            html += `<option value="${section.id}">${name}</option>`;
        });
        menu.innerHTML = html;
    }

    function jumpToSection(id) {
        if (!id) return;
        const target = document.getElementById(id);
        if (target) {
            target.scrollIntoView();
            setTimeout(() => { document.getElementById('jumpMenu').value = ""; }, 1000);
        }
    }

    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    window.addEventListener('scroll', () => {
        const btn = document.getElementById('backToTop');
        if (window.scrollY > 300) {
            btn.classList.add('visible');
        } else {
            btn.classList.remove('visible');
        }
    });

    async function load() {
        try {
            // Pointing to your public data repository
            const dataUrl = 'website_data_by_cinema.json';

// We add the timestamp (?t=...) to make sure Safari always grabs the freshest times
const res = await fetch(`${dataUrl}?t=${new Date().getTime()}`);
            cinemaData = await res.json();
            
            // Load user preferences or use defaults
            const preferences = loadUserPreferences();
            if (preferences && preferences.activeCinemas) {
                // Restore saved cinema preferences
                activeCinemas.clear();
                preferences.activeCinemas.forEach(name => {
                    if (cinemaData.cinemas.some(c => c.name === name)) {
                        activeCinemas.add(name);
                    }
                });
                
                // If no valid cinemas were restored, default to first cinema
                if (activeCinemas.size === 0) {
                    activeCinemas.add(cinemaData.cinemas[0].name);
                }
                
                // Restore other preferences
                selectedDayIndex = preferences.selectedDayIndex || 0;
                currentView = preferences.currentView || 'time';
                
                // Update view toggle buttons
                document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
                const viewBtn = document.querySelector(`.view-btn[onclick="setView('${currentView}')"]`);
                if (viewBtn) viewBtn.classList.add('active');
            } else {
                // Default: all cinemas selected
                cinemaData.cinemas.forEach(c => activeCinemas.add(c.name));
            }
            
            document.getElementById('lastUpdate').innerText = `Updated: ${new Date(cinemaData.last_updated).toLocaleTimeString()}`;
            setupDates();
            renderCinemaBar();
            renderDayBar();
            renderList();
            
            setTimeout(updateHeaderHeight, 100);
            window.addEventListener('resize', updateHeaderHeight);
        } catch (e) {
            document.getElementById('mainContent').innerHTML = "<div class='no-shows'>Error: Connect to your JSON file.</div>";
        }
    }

    load();

    // SEO: Add structured data for cinemas dynamically
    function addCinemaStructuredData() {
        if (!cinemaData || !cinemaData.cinemas) return;
        
        const cinemas = cinemaData.cinemas.map(cinema => ({
            "@type": "MovieTheater",
            "name": cinema.name,
            "address": cinema.location,
            "url": cinema.url || ""
        }));

        const structuredData = {
            "@context": "https://schema.org",
            "@type": "ItemList",
            "name": "Cambridge Cinema Listings",
            "description": "Complete cinema listings for Cambridge and Ely",
            "itemListElement": cinemas
        };

        const script = document.createElement('script');
        script.type = 'application/ld+json';
        script.textContent = JSON.stringify(structuredData);
        document.head.appendChild(script);
    }

    addCinemaStructuredData();

</script>

<!-- SEO Content -->
<div style="margin-top: 40px; padding: 20px; background: #f8fafc; border-radius: 8px; font-size: 0.9rem; color: #4a5568;">
    <h2 style="color: #2d3748; margin-bottom: 10px;">üé¨ Cambridge Cinema Guide</h2>
    <p style="margin-bottom: 10px;">Your complete guide to cinema in Cambridge and Ely. Find all film showtimes, book tickets instantly, and discover what's playing tonight at your local cinemas.</p>
    
    <h3 style="color: #2d3748; margin-bottom: 8px;">üìç Cambridge Cinemas Covered:</h3>
    <ul style="margin-bottom: 10px; padding-left: 20px;">
        <li><strong>The Light Cambridge</strong> - Latest blockbusters and IMAX screenings</li>
        <li><strong>Arts Picturehouse Cambridge</strong> - Independent and arthouse films</li>
        <li><strong>Everyman Cambridge</strong> - Premium cinema experience</li>
        <li><strong>Cineworld Ely</strong> - Full cinema experience just outside Cambridge</li>
    </ul>
    
    <h3 style="color: #2d3748; margin-bottom: 8px;">üïê Real-Time Information:</h3>
    <p style="margin-bottom: 10px;">All showtimes are updated automatically throughout the day. Find exactly what's playing tonight, tomorrow, or any day this week. Filter by time or cinema to find your perfect screening.</p>
    
    <h3 style="color: #2d3748; margin-bottom: 8px;">üéØ Why Choose Cambridge Cinema Tonight?</h3>
    <ul style="padding-left: 20px;">
        <li>‚úÖ Live showtimes from all Cambridge cinemas</li>
        <li>‚úÖ Instant ticket booking links</li>
        <li>‚úÖ Mobile-friendly design</li>
        <li>‚úÖ No ads, no distractions</li>
        <li>‚úÖ Updated every 6 hours automatically</li>
    </ul>
    
    <p style="margin-top: 15px; font-size: 0.8rem; color: #718096;">
        Cambridge Cinema Tonight ‚Ä¢ Your trusted source for cinema listings in Cambridge, UK
    </p>
</div>

</body>
</html>
